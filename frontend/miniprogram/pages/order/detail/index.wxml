<view class="container">
  <view class="status-section">
    <view class="status {{order.status}}">
      <text>{{order.status_text}}</text>
    </view>
    <view class="desc">{{order.status_desc}}</view>
  </view>

  <view class="address-section">
    <view class="title">收货信息</view>
    <view class="content">
      <view class="name-phone">
        <text class="name">{{order.shipping_address.name}}</text>
        <text class="phone">{{order.shipping_address.phone}}</text>
      </view>
      <view class="address">{{order.shipping_address.address}}</view>
    </view>
  </view>

  <view class="order-section">
    <view class="title">订单信息</view>
    <view class="content">
      <view class="order-number">订单号：{{order.order_number}}</view>
      <view class="create-time">创建时间：{{order.created_at}}</view>
      <view class="pay-time" wx:if="{{order.paid_at}}">支付时间：{{order.paid_at}}</view>
      <view class="shipping-time" wx:if="{{order.shipped_at}}">发货时间：{{order.shipped_at}}</view>
      <view class="complete-time" wx:if="{{order.completed_at}}">完成时间：{{order.completed_at}}</view>
    </view>
  </view>

  <view class="products-section">
    <view class="title">商品信息</view>
    <view class="content">
      <view class="product-item" wx:for="{{order.items}}" wx:key="id">
        <image class="product-image" src="{{item.product.image}}"></image>
        <view class="product-info">
          <view class="product-name">{{item.product.name}}</view>
          <view class="product-spec">{{item.variant.name}}</view>
          <view class="product-price">
            <text class="price">¥{{item.price}}</text>
            <text class="quantity">x{{item.quantity}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="amount-section">
    <view class="item">
      <text class="label">商品总额</text>
      <text class="value">¥{{order.total_amount}}</text>
    </view>
    <view class="item">
      <text class="label">运费</text>
      <text class="value">¥{{order.shipping_fee}}</text>
    </view>
    <view class="item">
      <text class="label">优惠金额</text>
      <text class="value">-¥{{order.discount_amount}}</text>
    </view>
    <view class="item total">
      <text class="label">实付金额</text>
      <text class="value">¥{{order.payment_amount}}</text>
    </view>
  </view>

  <view class="action-section">
    <block wx:if="{{order.status === 'pending'}}">
      <button class="btn cancel" bindtap="cancelOrder">取消订单</button>
      <button class="btn primary" bindtap="payOrder">立即支付</button>
    </block>
    <block wx:if="{{order.status === 'paid'}}">
      <button class="btn" bindtap="viewLogistics">查看物流</button>
    </block>
    <block wx:if="{{order.status === 'shipped'}}">
      <button class="btn" bindtap="viewLogistics">查看物流</button>
      <button class="btn primary" bindtap="confirmReceive">确认收货</button>
    </block>
    <block wx:if="{{order.status === 'completed'}}">
      <button class="btn" bindtap="deleteOrder">删除订单</button>
      <button class="btn primary" bindtap="buyAgain">再次购买</button>
    </block>
  </view>
</view> 